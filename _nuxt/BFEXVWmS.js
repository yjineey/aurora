import{t as g,c as S,u as b}from"./BEVBSfp2.js";import{B as f,r as I,o as _}from"./CTAEdEhg.js";import{a as E,b as w}from"./C89fsght.js";function A(...l){return f(()=>l.every(o=>g(o)))}function D(l){return f(()=>!g(l))}const $=()=>{const l=f(()=>navigator&&navigator.userAgent&&navigator.userAgent.match(/Macintosh;/)),o=I(" "),s=E(),d=f(()=>{var m,p,e;const u=(m=s.value)==null?void 0:m.tagName,c=(p=s.value)==null?void 0:p.contentEditable;return u==="INPUT"||u==="TEXTAREA"||c==="true"||c==="plaintext-only"?((e=s.value)==null?void 0:e.name)||!0:!1});return _(()=>{o.value=l.value?"âŒ˜":"Ctrl"}),{macOS:l,metaSymbol:o,activeElement:s,usingInput:d}},j=S($),x=/^[^-]+.*-.*[^-]+$/,L=/^[^_]+.*_.*[^_]+$/,T=(l,o={})=>{const{macOS:s,usingInput:d}=j();let u=[];const c=I([]),h=()=>{c.value.splice(0,c.value.length)},m=b(h,o.chainDelay??800),p=e=>{if(!e.key)return;const a=/^[a-z]{1}$/i.test(e.key);let t;if(c.value.push(e.key),c.value.length>=2){t=c.value.slice(-2).join("-");for(const n of u.filter(i=>i.chained))if(n.key===t){n.condition.value&&(e.preventDefault(),n.handler()),h();return}}for(const n of u.filter(i=>!i.chained))if(e.key.toLowerCase()===n.key&&e.metaKey===n.metaKey&&e.ctrlKey===n.ctrlKey&&!(a&&e.shiftKey!==n.shiftKey)){n.condition.value&&(e.preventDefault(),n.handler()),h();return}m()};u=Object.entries(l).map(([e,a])=>{var v,K;if(!a)return null;let t;e.includes("-")&&e!=="-"&&!((v=e.match(x))!=null&&v.length)&&console.trace(`[Shortcut] Invalid key: "${e}"`),e.includes("_")&&e!=="_"&&!((K=e.match(L))!=null&&K.length)&&console.trace(`[Shortcut] Invalid key: "${e}"`);const n=e.includes("-")&&e!=="-";if(n)t={key:e.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const r=e.toLowerCase().split("_").map(y=>y);t={key:r.filter(y=>!["meta","ctrl","shift","alt"].includes(y)).join("_"),metaKey:r.includes("meta"),ctrlKey:r.includes("ctrl"),shiftKey:r.includes("shift"),altKey:r.includes("alt")}}if(t.chained=n,!s.value&&t.metaKey&&!t.ctrlKey&&(t.metaKey=!1,t.ctrlKey=!0),typeof a=="function"?t.handler=a:typeof a=="object"&&(t={...t,handler:a.handler}),!t.handler)return console.trace("[Shortcut] Invalid value"),null;const i=[];return a.usingInput?typeof a.usingInput=="string"&&i.push(f(()=>d.value===a.usingInput)):i.push(D(d)),t.condition=A(...i,...a.whenever||[]),t}).filter(Boolean),w("keydown",p)};export{T as d};
