import{a as P,n as L,i as N,t as S,b as H,d as Y,e as I,f as V,g as k}from"./DJwp9WIK.js";import{B as _,r as h,a4 as C,ah as T,o as q,ai as F,x as U}from"./Dh0iPWJ5.js";const M=Y?window:void 0,z=Y?window.navigator:void 0;function x(t){var o;const r=S(t);return(o=r==null?void 0:r.$el)!=null?o:r}function E(...t){let o,r,i,v;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,i,v]=t,o=M):[o,r,i,v]=t,!o)return L;Array.isArray(r)||(r=[r]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach(n=>n()),s.length=0},c=(n,e,u,p)=>(n.addEventListener(e,u,p),()=>n.removeEventListener(e,u,p)),d=C(()=>[x(o),S(v)],([n,e])=>{if(a(),!n)return;const u=N(e)?{...e}:e;s.push(...r.flatMap(p=>i.map(g=>c(n,p,g,u))))},{immediate:!0,flush:"post"}),l=()=>{d(),a()};return H(l),l}function $(){const t=h(!1),o=F();return o&&q(()=>{t.value=!0},o),t}function W(t){const o=$();return _(()=>(o.value,!!t()))}function j(t,o,r={}){const{window:i=M,...v}=r;let s;const a=W(()=>i&&"MutationObserver"in i),c=()=>{s&&(s.disconnect(),s=void 0)},d=_(()=>{const u=S(t),p=(Array.isArray(u)?u:[u]).map(x).filter(k);return new Set(p)}),l=C(()=>d.value,u=>{c(),a.value&&u.size&&(s=new MutationObserver(o),u.forEach(p=>s.observe(p,v)))},{immediate:!0,flush:"post"}),n=()=>s==null?void 0:s.takeRecords(),e=()=>{l(),c()};return H(e),{isSupported:a,stop:e,takeRecords:n}}function Z(t={}){var o;const{window:r=M,deep:i=!0,triggerOnRemoval:v=!1}=t,s=(o=t.document)!=null?o:r==null?void 0:r.document,a=()=>{var l;let n=s==null?void 0:s.activeElement;if(i)for(;n!=null&&n.shadowRoot;)n=(l=n==null?void 0:n.shadowRoot)==null?void 0:l.activeElement;return n},c=h(),d=()=>{c.value=a()};return r&&(E(r,"blur",l=>{l.relatedTarget===null&&d()},!0),E(r,"focus",d,!0)),v&&j(s,l=>{l.filter(n=>n.removedNodes.length).map(n=>Array.from(n.removedNodes)).flat().forEach(n=>{n===c.value&&d()})},{childList:!0,subtree:!0}),d(),c}function X(t,o={}){const{controls:r=!1,navigator:i=z}=o,v=W(()=>i&&"permissions"in i),s=T(),a=typeof t=="string"?{name:t}:t,c=T(),d=()=>{var n,e;c.value=(e=(n=s.value)==null?void 0:n.state)!=null?e:"prompt"};E(s,"change",d);const l=I(async()=>{if(v.value){if(!s.value)try{s.value=await i.permissions.query(a)}catch{s.value=void 0}finally{d()}if(r)return U(s.value)}});return l(),r?{state:c,isSupported:v,query:l}:c}function ee(t={}){const{navigator:o=z,read:r=!1,source:i,copiedDuring:v=1500,legacy:s=!1}=t,a=W(()=>o&&"clipboard"in o),c=X("clipboard-read"),d=X("clipboard-write"),l=_(()=>a.value||s),n=h(""),e=h(!1),u=P(()=>e.value=!1,v);function p(){a.value&&O(c.value)?o.clipboard.readText().then(m=>{n.value=m}):n.value=A()}l.value&&r&&E(["copy","cut"],p);async function g(m=S(i)){l.value&&m!=null&&(a.value&&O(d.value)?await o.clipboard.writeText(m):w(m),n.value=m,e.value=!0,u.start())}function w(m){const y=document.createElement("textarea");y.value=m??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function A(){var m,y,R;return(R=(y=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:y.toString())!=null?R:""}function O(m){return m==="granted"||m==="prompt"}return{isSupported:l,text:n,copied:e,copy:g}}function D(t,o,r={}){const{window:i=M,...v}=r;let s;const a=W(()=>i&&"ResizeObserver"in i),c=()=>{s&&(s.disconnect(),s=void 0)},d=_(()=>{const e=S(t);return Array.isArray(e)?e.map(u=>x(u)):[x(e)]}),l=C(d,e=>{if(c(),a.value&&i){s=new ResizeObserver(o);for(const u of e)u&&s.observe(u,v)}},{immediate:!0,flush:"post"}),n=()=>{c(),l()};return H(n),{isSupported:a,stop:n}}function te(t,o={width:0,height:0},r={}){const{window:i=M,box:v="content-box"}=r,s=_(()=>{var e,u;return(u=(e=x(t))==null?void 0:e.namespaceURI)==null?void 0:u.includes("svg")}),a=h(o.width),c=h(o.height),{stop:d}=D(t,([e])=>{const u=v==="border-box"?e.borderBoxSize:v==="content-box"?e.contentBoxSize:e.devicePixelContentBoxSize;if(i&&s.value){const p=x(t);if(p){const g=p.getBoundingClientRect();a.value=g.width,c.value=g.height}}else if(u){const p=Array.isArray(u)?u:[u];a.value=p.reduce((g,{inlineSize:w})=>g+w,0),c.value=p.reduce((g,{blockSize:w})=>g+w,0)}else a.value=e.contentRect.width,c.value=e.contentRect.height},r);V(()=>{const e=x(t);e&&(a.value="offsetWidth"in e?e.offsetWidth:o.width,c.value="offsetHeight"in e?e.offsetHeight:o.height)});const l=C(()=>x(t),e=>{a.value=e?o.width:0,c.value=e?o.height:0});function n(){d(),l()}return{width:a,height:c,stop:n}}const G={page:t=>[t.pageX,t.pageY],client:t=>[t.clientX,t.clientY],screen:t=>[t.screenX,t.screenY],movement:t=>t instanceof Touch?null:[t.movementX,t.movementY]};function J(t={}){const{type:o="page",touch:r=!0,resetOnTouchEnds:i=!1,initialValue:v={x:0,y:0},window:s=M,target:a=s,scroll:c=!0,eventFilter:d}=t;let l=null;const n=h(v.x),e=h(v.y),u=h(null),p=typeof o=="function"?o:G[o],g=f=>{const b=p(f);l=f,b&&([n.value,e.value]=b,u.value="mouse")},w=f=>{if(f.touches.length>0){const b=p(f.touches[0]);b&&([n.value,e.value]=b,u.value="touch")}},A=()=>{if(!l||!s)return;const f=p(l);l instanceof MouseEvent&&f&&(n.value=f[0]+s.scrollX,e.value=f[1]+s.scrollY)},O=()=>{n.value=v.x,e.value=v.y},m=d?f=>d(()=>g(f),{}):f=>g(f),y=d?f=>d(()=>w(f),{}):f=>w(f),R=d?()=>d(()=>A(),{}):()=>A();if(a){const f={passive:!0};E(a,["mousemove","dragover"],m,f),r&&o!=="movement"&&(E(a,["touchstart","touchmove"],y,f),i&&E(a,"touchend",O,f)),c&&o==="page"&&E(s,"scroll",R,{passive:!0})}return{x:n,y:e,sourceType:u}}function ne(t,o={}){const{handleOutside:r=!0,window:i=M}=o,v=o.type||"page",{x:s,y:a,sourceType:c}=J(o),d=h(t??(i==null?void 0:i.document.body)),l=h(0),n=h(0),e=h(0),u=h(0),p=h(0),g=h(0),w=h(!0);let A=()=>{};return i&&(A=C([d,s,a],()=>{const O=x(d);if(!O||!(O instanceof Element))return;const{left:m,top:y,width:R,height:f}=O.getBoundingClientRect();e.value=m+(v==="page"?i.pageXOffset:0),u.value=y+(v==="page"?i.pageYOffset:0),p.value=f,g.value=R;const b=s.value-e.value,B=a.value-u.value;w.value=R===0||f===0||b<0||B<0||b>R||B>f,(r||!w.value)&&(l.value=b,n.value=B)},{immediate:!0}),E(document,"mouseleave",()=>{w.value=!0})),{x:s,y:a,sourceType:c,elementX:l,elementY:n,elementPositionX:e,elementPositionY:u,elementHeight:p,elementWidth:g,isOutside:w,stop:A}}export{Z as a,E as b,ne as c,te as d,D as e,x as f,ee as u};
